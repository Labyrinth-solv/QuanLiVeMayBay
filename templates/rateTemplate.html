<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rate My Flights</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/app_base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/rateTemplate.css') }}">
    
    <link rel="icon" href="{{ url_for('static', filename='img/favicon-32x32.png') }}" type="image/png">
</head>

<body>

<div class="app-panel">

    <header class="app-header">
        <div class="header-welcome">
            <h1>Welcome {{name}}.</h1> 
            <p class="sub-heading">Share your feedback on past flights.</p>
        </div>
        <div class="header-links">
            <a href="/customerLogout" class="logout-link">Logout</a>
            <a href="/customerHome" class="home-link">Return to Home</a>
        </div>
    </header>

    <main class="app-content">

    {% if previous_flights %}
        <form action="/rateFlight" method="POST">
            <h2>Rating and Comment Form</h2>
            
            <label>Airline Name:</label>
            <input type="text" name="airline_name" required>
            
            <label>Flight Number:</label>
            <input type="number" name="flight_number" required>
            
            <label>Rating (1-10):</label>
            <input type="number" name="rating" min="1" max="10" required>
            
            <label>Comment:</label>
            <input type="text" name="comment">
            
            <input type="submit" value="Submit Rating">

            {% if error %}
                <p class="error"><strong>Error:</strong> {{error}}</p>
            {% endif %}
        </form>

        <h2 class="table-heading">Previous Flights</h2>
        <table>
    <thead>
        <tr> <th>Airline Name</th> <th>Flight Number</th>
            <th>Source Airport</th>
            <th>Destination Airport</th>
            <th>Departure Date and Time</th>
            <th>Landing Date and Time</th>
            <th>Status</th>
            <th>Price</th>
            <th>Ticket ID</th>
        </tr>
    </thead>
    <tbody>
        {% for line in previous_flights %}
        <tr> <td>{{line['name']}}</td> <td>{{line['flight_number']}}</td>
            <td>{{line['dep_airport']}}</td>
            <td>{{line['arr_airport']}}</td>
            <td>{{line['dep_date_time']}}</td>
            <td>{{line['arr_date_time']}}</td>
            <td>{{line['status']}}</td>
            <td>{{line['sold_price']}}</td>
            <td>{{line['ID']}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

    {% else %}
        <div class="no-flights-message">
            You do not have any previous flights to rate or comment on.
        </div>
    {% endif %}

    </main> </div> </body>
</html>